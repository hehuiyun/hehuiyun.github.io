<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>微信小程序-实现视频和图片轮播 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="前言做一个类似电商的平台，有一个页面要仿淘宝实现：视频和图片既可以滑动轮播也可以点击轮播。">
<meta property="og:type" content="article">
<meta property="og:title" content="微信小程序-实现视频和图片轮播">
<meta property="og:url" content="http://yoursite.com/2018/10/26/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E5%AE%9E%E7%8E%B0%E8%A7%86%E9%A2%91%E5%92%8C%E5%9B%BE%E7%89%87%E8%BD%AE%E6%92%AD/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="前言做一个类似电商的平台，有一个页面要仿淘宝实现：视频和图片既可以滑动轮播也可以点击轮播。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://yoursite.com/2018/10/26/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E5%AE%9E%E7%8E%B0%E8%A7%86%E9%A2%91%E5%92%8C%E5%9B%BE%E7%89%87%E8%BD%AE%E6%92%AD/avatar.jpg">
<meta property="og:image" content="http://yoursite.com/2018/10/26/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E5%AE%9E%E7%8E%B0%E8%A7%86%E9%A2%91%E5%92%8C%E5%9B%BE%E7%89%87%E8%BD%AE%E6%92%AD/result.gif">
<meta property="og:image" content="http://yoursite.com/2018/10/26/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E5%AE%9E%E7%8E%B0%E8%A7%86%E9%A2%91%E5%92%8C%E5%9B%BE%E7%89%87%E8%BD%AE%E6%92%AD/video.png">
<meta property="article:published_time" content="2018-10-26T03:03:01.000Z">
<meta property="article:modified_time" content="2019-01-17T09:32:26.390Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="小程序">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2018/10/26/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E5%AE%9E%E7%8E%B0%E8%A7%86%E9%A2%91%E5%92%8C%E5%9B%BE%E7%89%87%E8%BD%AE%E6%92%AD/avatar.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-微信小程序-实现视频和图片轮播" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/10/26/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E5%AE%9E%E7%8E%B0%E8%A7%86%E9%A2%91%E5%92%8C%E5%9B%BE%E7%89%87%E8%BD%AE%E6%92%AD/" class="article-date">
  <time datetime="2018-10-26T03:03:01.000Z" itemprop="datePublished">2018-10-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      微信小程序-实现视频和图片轮播
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="avatar.jpg" alt=""></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>做一个类似电商的平台，有一个页面要仿淘宝实现：视频和图片既可以滑动轮播也可以点击轮播。</p>
<a id="more"></a>

<h3 id="一、思路"><a href="#一、思路" class="headerlink" title="一、思路"></a>一、思路</h3><p><strong>需求</strong>：一开始把问题想得很简单，只要把视频放在swiper组件的第一个swiper-item中就可以了。</p>
<p>代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">swiper</span> <span class="attr">class</span>=<span class="string">'swiper'</span> <span class="attr">duration</span>=<span class="string">"&#123;&#123;duration&#125;&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">class</span>=<span class="string">"swiper-item"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">"myVideo"</span> <span class="attr">src</span>=<span class="string">"&#123;&#123;mdc_video&#125;&#125;"</span> <span class="attr">controls</span> <span class="attr">objectFit</span>=<span class="string">"contain"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;background&#125;&#125;"</span> <span class="attr">wx:key</span>=<span class="string">"*this"</span> <span class="attr">wx:for-index</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">class</span>=<span class="string">"swiper-item"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">mode</span>=<span class="string">"aspectFit"</span> <span class="attr">src</span>=<span class="string">'&#123;&#123;item&#125;&#125;'</span> <span class="attr">class</span>=<span class="string">'swiper-item-img'</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--wxss--&gt;</span></span><br><span class="line">.swiper&#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 750rpx;</span><br><span class="line">  background: #000;</span><br><span class="line">&#125;</span><br><span class="line">.swiper-item,video,image&#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--js--&gt;</span></span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    //swiper参数</span><br><span class="line">    indicatorDots: false,</span><br><span class="line">    vertical: false,</span><br><span class="line">    autoplay: false,</span><br><span class="line">    duration: 500,</span><br><span class="line">    //视频地址</span><br><span class="line">    mdc_video: 'https://cloud.video.taobao.com/play/u/576446681/p/1/e/6/t/1/50140370746.mp4',</span><br><span class="line">    //图片数组</span><br><span class="line">    background: ['https://ss0.baidu.com/7Po3dSag_xI4khGko9WTAnF6hhy/image/h%3D300/sign=0df5aa7401d79123ffe092749d355917/48540923dd54564e552d1e45bede9c82d1584f06.jpg', 'https://ss0.baidu.com/94o3dSag_xI4khGko9WTAnF6hhy/image/h%3D300/sign=9eca3f36fb246b60640eb474dbf91a35/b90e7bec54e736d10feded6d96504fc2d46269dc.jpg', 'https://ss1.baidu.com/9vo3dSag_xI4khGko9WTAnF6hhy/image/h%3D300/sign=504c7d57bd51f819ee25054aeab54a76/d6ca7bcb0a46f21fd757a52ffb246b600c33ae6f.jpg'],</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>发现问题：</strong></p>
<p>在微信开发者工具上面显示是正常的，但是在真机上测试的时候才发现，当滑动到图片时，视频会有部分浮在页面上。显然，这是不合理的。</p>
<p><strong>解决问题</strong>：</p>
<p>在网上查询了相关内容，终于在文章最后的博客（参考链接）中找到了解决方法。思路：既然直接轮播视频行不通，那么先将视频隐藏然后放一张图片和一个播放按钮来轮播。当点击视频时，图片和按钮隐藏，在视频上增加一个“退出视频”的按钮。要这个按钮的作用是：隐藏视频，让封面和按钮显示。也就是当视频播放的时候，视频不能轮播的，当我们左右滑动的时候，改变的只有视频的进度条。而退出视频之后，视频隐藏了，显示的也是一张图片了，滑动轮播就没有什么问题了。</p>
<h3 id="二、代码"><a href="#二、代码" class="headerlink" title="二、代码"></a>二、代码</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--wxml--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 视频、图片 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'media-container'</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper</span> <span class="attr">class</span>=<span class="string">'swiper'</span> <span class="attr">current</span>=<span class="string">"&#123;&#123;currentTab&#125;&#125;"</span> <span class="attr">duration</span>=<span class="string">"&#123;&#123;duration&#125;&#125;"</span> <span class="attr">bindchange</span>=<span class="string">"swiperChange"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">class</span>=<span class="string">"swiper-item"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'ceng'</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">'temp-poster'</span> <span class="attr">mode</span>=<span class="string">"aspectFit"</span> <span class="attr">src</span>=<span class="string">"&#123;&#123;mdc_videofenmian&#125;&#125;"</span> <span class="attr">hidden</span>=<span class="string">"&#123;&#123;xiaoshi&#125;&#125;"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"temp-play"</span> <span class="attr">bindtap</span>=<span class="string">"play"</span> <span class="attr">wx:if</span>=<span class="string">"&#123;&#123;isShow&#125;&#125;"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">"temp-img"</span> <span class="attr">src</span>=<span class="string">"../img/play.png"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">"myVideo"</span> <span class="attr">src</span>=<span class="string">"&#123;&#123;mdc_video&#125;&#125;"</span> <span class="attr">controls</span> <span class="attr">hidden</span>=<span class="string">"&#123;&#123;isShow&#125;&#125;"</span> <span class="attr">objectFit</span>=<span class="string">"contain"</span> <span class="attr">bindfullscreenchange</span>=<span class="string">"fullscreenChange"</span> <span class="attr">bindended</span>=<span class="string">"videoEnd"</span> <span class="attr">bindtouchmove</span>=<span class="string">"mdc_move1"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">cover-view</span> <span class="attr">class</span>=<span class="string">'mdc_return'</span> <span class="attr">bindtap</span>=<span class="string">'returnquanping'</span> <span class="attr">hidden</span>=<span class="string">"&#123;&#123;!isFullScreen&#125;&#125;"</span>&gt;</span>退出视频<span class="tag">&lt;/<span class="name">cover-view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;background&#125;&#125;"</span> <span class="attr">wx:key</span>=<span class="string">"*this"</span> <span class="attr">wx:for-index</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">class</span>=<span class="string">"swiper-item"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">mode</span>=<span class="string">"aspectFit"</span> <span class="attr">src</span>=<span class="string">'&#123;&#123;item&#125;&#125;'</span> <span class="attr">class</span>=<span class="string">'swiper-item-img'</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--  实现点击选中样式  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"dots"</span> <span class="attr">hidden</span>=<span class="string">"&#123;&#123;swiperCurrent == 0&#125;&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;background&#125;&#125;"</span> <span class="attr">wx:for-index</span>=<span class="string">"index"</span> <span class="attr">wx:key</span>=<span class="string">"*this"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">"&#123;&#123;index+1 == swiperCurrent&#125;&#125;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;index + 1&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span>/</span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;background.length&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"media-tab"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">"&#123;&#123;swiperCurrent == 0&#125;&#125;"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"media-item meidaActive"</span> <span class="attr">data-current</span>=<span class="string">"0"</span> <span class="attr">bindtap</span>=<span class="string">"tabNav"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'arrow arrow-white'</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'media-name'</span>&gt;</span>视频<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"media-item"</span> <span class="attr">data-current</span>=<span class="string">"1"</span> <span class="attr">bindtap</span>=<span class="string">"tabNav"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'media-name'</span>&gt;</span>图片<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"media-item"</span> <span class="attr">data-current</span>=<span class="string">"0"</span> <span class="attr">bindtap</span>=<span class="string">"tabNav"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'arrow arrow-black'</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'media-name'</span>&gt;</span>视频<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"media-item meidaActive"</span> <span class="attr">data-current</span>=<span class="string">"1"</span> <span class="attr">bindtap</span>=<span class="string">"tabNav"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'media-name'</span>&gt;</span>图片<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--wxss--&gt;</span></span><br><span class="line">.media-container&#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 750rpx;</span><br><span class="line">  background-color: #000;</span><br><span class="line">&#125;</span><br><span class="line">.swiper,.swiper-item,video,image&#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line">.dots &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  right: 20rpx;</span><br><span class="line">  bottom: 20rpx;</span><br><span class="line">  line-height: 50rpx;</span><br><span class="line">  padding: 0 20rpx;</span><br><span class="line">  background-color: rgba(0, 0, 0, 0.2);</span><br><span class="line">  border-radius: 25rpx;</span><br><span class="line">  color: #fff;</span><br><span class="line">&#125;</span><br><span class="line">#myVideo&#123;</span><br><span class="line">  position: relative;</span><br><span class="line">&#125;</span><br><span class="line">.ceng &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.temp-poster &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.mdc_return &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left: calc(50% - 80rpx);</span><br><span class="line">  bottom: 160rpx; </span><br><span class="line">  color: #333;</span><br><span class="line">  padding: 10rpx;</span><br><span class="line">  width: 160rpx;</span><br><span class="line">  text-align: center;</span><br><span class="line">  line-height: 40rpx;</span><br><span class="line">  border-radius:30rpx;</span><br><span class="line">  background:rgba(255,255,255,0.6);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> .temp-play &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left: 0;</span><br><span class="line">  top: 0;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125; </span><br><span class="line">.temp-img &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">  top: 0;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  margin: auto; </span><br><span class="line">  width: 131rpx;</span><br><span class="line">  height: 131rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.media-tab &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  bottom: 60rpx;</span><br><span class="line">  left: 0;</span><br><span class="line">  width: 100%;</span><br><span class="line">  text-align: center;</span><br><span class="line">  z-index: 99999;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.media-item &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  border-radius: 32rpx;</span><br><span class="line">  padding: 0 30rpx;</span><br><span class="line">  font-size: 28rpx;</span><br><span class="line">  color: #323232;</span><br><span class="line">  background: rgba(255, 255, 255, 0.8);</span><br><span class="line">  margin: 30rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.arrow &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left: 16rpx;</span><br><span class="line">  top: 0;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  margin: auto;</span><br><span class="line">  width: 0;</span><br><span class="line">  height: 0;</span><br><span class="line">  border: 8rpx solid transparent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.arrow-white &#123;</span><br><span class="line">  border-left: 10rpx solid #fff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.arrow-black &#123;</span><br><span class="line">  border-left: 10rpx solid #323232;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.media-name &#123;</span><br><span class="line">  line-height: 46rpx;</span><br><span class="line">  margin: 8rpx 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.media-item.meidaActive &#123;</span><br><span class="line">  color: #fff;</span><br><span class="line">  background-color: #ff7800;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--js--&gt;</span></span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    //swiper参数</span><br><span class="line">    indicatorDots: false,</span><br><span class="line">    duration: 500,</span><br><span class="line">    //视频地址</span><br><span class="line">    mdc_video: 'https://cloud.video.taobao.com/play/u/576446681/p/1/e/6/t/1/50140370746.mp4',</span><br><span class="line">    //替换视频的封面图</span><br><span class="line">    mdc_videofenmian: 'https://ss0.baidu.com/7Po3dSag_xI4khGko9WTAnF6hhy/image/h%3D300/sign=826baac9dcc8a786a12a4c0e5709c9c7/5bafa40f4bfbfbed0c103c4c75f0f736afc31fb3.jpg',</span><br><span class="line">    // 视频的封面图显示消失的参数</span><br><span class="line">    xiaoshi: false,</span><br><span class="line">    //当前所在滑块的index</span><br><span class="line">    currentTab: '',</span><br><span class="line">    //判断视频是否全屏播放的参数</span><br><span class="line">    isFullScreen: true,</span><br><span class="line">    //视频是否隐藏的参数</span><br><span class="line">    isShow: true,</span><br><span class="line">    //图片数组</span><br><span class="line">    background: ['../img/store-bg.png', '../img/advertisement.png', '../img/leaseholder-img.png'],</span><br><span class="line">    //tab切换</span><br><span class="line">    swiperCurrent: 0,</span><br><span class="line">  &#125;,</span><br><span class="line">  //点击“视频、图片”切换</span><br><span class="line">  tabNav(e) &#123;</span><br><span class="line">    var that = this;</span><br><span class="line">    that.setData(&#123;</span><br><span class="line">      currentTab: e.currentTarget.dataset.current,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 图片轮播触发</span><br><span class="line">  swiperChange: function (e) &#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      swiperCurrent: e.detail.current, //获取当前轮播图片的下标,</span><br><span class="line">      currentTab: e.detail.current</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 监听全屏事件</span><br><span class="line">  fullscreenChange(e) &#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      isFullScreen: !this.data.isFullScreen,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 监听视频播放结束事件</span><br><span class="line">  videoEnd(e) &#123;</span><br><span class="line">    var that = this;</span><br><span class="line">    that.setData(&#123;</span><br><span class="line">      xiaoshi: false,</span><br><span class="line">      isShow: true</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  onReady() &#123;</span><br><span class="line">    this.videoCtx = wx.createVideoContext('myVideo')</span><br><span class="line">  &#125;,</span><br><span class="line">  // 视频播放</span><br><span class="line">  // 封面点击的时候相应的操作  获取视频在JS里的参数属性 </span><br><span class="line">  //重点：点击图片接下来视频进行播放，但是视频播放后直接触发了视频的pause() 结局的方案是，延时150ms后再进行视频的播放，就完美解决了</span><br><span class="line">  play() &#123;</span><br><span class="line">    var that = this;</span><br><span class="line">    that.videoCtx.pause();</span><br><span class="line">    setTimeout(function () &#123;</span><br><span class="line">      that.videoCtx.play()</span><br><span class="line">    &#125;, 150);</span><br><span class="line">    that.setData(&#123;</span><br><span class="line">      xiaoshi: true,</span><br><span class="line">      isShow: false</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  //安卓系统能检测到 video touchemove 滑动的x距离，已此作为切换的swiper的凭证</span><br><span class="line">  //ios系统，检测不到video touchemove 滑动的x距离，通过cover-view 点击事件进行切换</span><br><span class="line">  mdc_move1: function (e) &#123;</span><br><span class="line">    var that = this;</span><br><span class="line">    that.videoContext = wx.createVideoContext('myVideo');</span><br><span class="line">    if (e.touches[0].clientX &gt; 20) &#123;</span><br><span class="line">      that.setData(&#123;</span><br><span class="line">        xiaoshi: false,</span><br><span class="line">        mdc_show: true</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  // 点击退出视频触发</span><br><span class="line">  returnquanping: function (e) &#123;</span><br><span class="line">    var that = this;</span><br><span class="line">    that.setData(&#123;</span><br><span class="line">      xiaoshi: false,</span><br><span class="line">      isShow: true</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>最终效果如图所示：</p>
<p><img src="result.gif" alt=""></p>
<p>注意：由于只有电脑录制GIF图的工具，因此录制的是在微信开发者工具上的效果。在真机上也测试了，效果是一样的（当然我只测了我的手机）。</p>
<h3 id="三、需要注意的问题"><a href="#三、需要注意的问题" class="headerlink" title="三、需要注意的问题"></a>三、需要注意的问题</h3><p><strong>1.cover-view</strong></p>
<p>要在视频上面定位一个“退出视频”按钮，但是video组件的层级太高了。官网给出的方案是使用<code>cover-view</code> 标签。但是后期要实现视频进入全屏后，”退出全屏按钮“隐藏。最初用的是<code>wx:if</code> ，测试发现退出全屏时，cover-view中的文字会消失。这种现象非常莫名其妙，于是后面改用<code>hidden</code> ，测试后没有出现这个问题。至于原因我也不清楚！</p>
<p><strong>2.wx.createVideoContext操作video组件</strong></p>
<p>VideoContext 实例，可通过 <a href="https://developers.weixin.qq.com/miniprogram/dev/api/media/video/wx.createVideoContext.html" target="_blank" rel="noopener">wx.createVideoContext</a> 获取。</p>
<p><code>videoContext</code> 通过 <code>id</code> 跟一个 <code>&lt;video/&gt;</code> 组件绑定，操作对应的 <code>&lt;video/&gt;</code> 组件。</p>
<p><strong>3.如何判断视频进入/退出全屏?</strong></p>
<p>官网给出了相关的事件。</p>
<p><img src="video.png" alt=""></p>
<p><strong>4.swiper组件tab栏的变化</strong></p>
<p>参考了以下代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"swiper-tab"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"swiper-tab-list &#123;&#123;currentTab==0 ? 'on' : ''&#125;&#125;"</span> <span class="attr">data-current</span>=<span class="string">"0"</span> <span class="attr">bindtap</span>=<span class="string">"swichNav"</span>&gt;</span>红色<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"swiper-tab-list &#123;&#123;currentTab==1 ? 'on' : ''&#125;&#125;"</span> <span class="attr">data-current</span>=<span class="string">"1"</span> <span class="attr">bindtap</span>=<span class="string">"swichNav"</span>&gt;</span>绿色<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"swiper-tab-list &#123;&#123;currentTab==2 ? 'on' : ''&#125;&#125;"</span> <span class="attr">data-current</span>=<span class="string">"2"</span> <span class="attr">bindtap</span>=<span class="string">"swichNav"</span>&gt;</span>黄色<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"swiper-tab-temp"</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper</span> <span class="attr">current</span>=<span class="string">"&#123;&#123;currentTab&#125;&#125;"</span> <span class="attr">circular</span>=<span class="string">"&#123;&#123;true&#125;&#125;"</span> <span class="attr">class</span>=<span class="string">"swiper-box"</span> <span class="attr">duration</span>=<span class="string">"300"</span> <span class="attr">style</span>=<span class="string">"height:600px"</span> <span class="attr">bindchange</span>=<span class="string">"bindChange"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">style</span>=<span class="string">"background-color:red"</span>&gt;</span></span><br><span class="line">      红色内容</span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">style</span>=<span class="string">"background-color:green"</span>&gt;</span></span><br><span class="line">      绿色内容</span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">style</span>=<span class="string">"background-color:yellow"</span>&gt;</span></span><br><span class="line">      黑色内容</span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--wxss--&gt;</span></span><br><span class="line">.swiper-tab &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  border-bottom: 1px solid #777;</span><br><span class="line">  text-align: center;</span><br><span class="line">  line-height: 40px;</span><br><span class="line">  background-color: #fff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.swiper-tab-list &#123;</span><br><span class="line">  font-size: 13px;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  width: 33.3%;</span><br><span class="line">  color: #777;</span><br><span class="line">&#125;</span><br><span class="line">.on &#123;</span><br><span class="line">  color: #FFF;</span><br><span class="line">  background-color: #528dc3;</span><br><span class="line">  border-top:5rpx solid #528dc3;</span><br><span class="line">  border-bottom:5rpx solid #528dc3;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.swiper-box &#123;</span><br><span class="line">  display: block;</span><br><span class="line">  height: 100%;</span><br><span class="line">  width: 100%;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.swiper-box view &#123;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">&lt;!--js--&gt;</span></span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    currentTab: '',</span><br><span class="line">  &#125;,</span><br><span class="line">  /*** 滑动切换tab***/</span><br><span class="line">  bindChange: function (e) &#123;</span><br><span class="line">    var that = this;</span><br><span class="line">    that.setData(&#123; currentTab: e.detail.current &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  /*** 点击tab切换***/</span><br><span class="line">  swichNav: function (e) &#123;</span><br><span class="line">    var that = this;</span><br><span class="line">    that.setData(&#123;</span><br><span class="line">      currentTab: e.target.dataset.current</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>（1）设置data-current属性用于：点击当前项时，通过点击事件swichNav中处理e.dataset.current取到点击的目标值；<br>（2）swiper组件的current组件用于控制当前显示哪一页；</p>
<p>（3）swiper组件绑定change事件switchTab，通过e.detail.current拿到当前页。</p>
<h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><p>不知道是不是微信改动的原因，原先视频在swiper中是不能滑动的，左右滑动只能改变视频进度条。但是，现在却可以，所以对以上视频和图片之间的滑动进行了改动。</p>
<p>方法：由于视频可以滑动了，所以不需要通过<code>mdc_move1</code>事件判断视频是否滑动。只要监听到swiper滑动了，就让视频暂停并且隐藏，显示播放按钮和封面。</p>
<p>改动的地方有：</p>
<blockquote>
<p>​    1.去除“退出视频”的按钮；</p>
<p>​    2.去除视频的“mdc_move1”事件；</p>
<p>​    3.在“swiperChange”，让视频暂停、让视频隐藏、播放按钮和封面显示。</p>
<p>​    <code>this.videoCtx.pause();</code>     视频暂停</p>
<p>​    <code>isShow:true</code>                 视频隐藏</p>
<p>​    <code>isShow:true</code>                 播放按钮显示</p>
<p>​    <code>xiaoshi: false</code>                         封面显示</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--wxml--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 视频、图片 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'media-container'</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper</span> <span class="attr">class</span>=<span class="string">'swiper'</span> <span class="attr">current</span>=<span class="string">"&#123;&#123;currentTab&#125;&#125;"</span> <span class="attr">duration</span>=<span class="string">"&#123;&#123;duration&#125;&#125;"</span> <span class="attr">bindchange</span>=<span class="string">"swiperChange"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">class</span>=<span class="string">"swiper-item"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'ceng'</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">'temp-poster'</span> <span class="attr">mode</span>=<span class="string">"aspectFit"</span> <span class="attr">src</span>=<span class="string">"&#123;&#123;mdc_videofenmian&#125;&#125;"</span> <span class="attr">hidden</span>=<span class="string">"&#123;&#123;xiaoshi&#125;&#125;"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"temp-play"</span> <span class="attr">bindtap</span>=<span class="string">"play"</span> <span class="attr">wx:if</span>=<span class="string">"&#123;&#123;isShow&#125;&#125;"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">"temp-img"</span> <span class="attr">src</span>=<span class="string">"../img/play.png"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">video</span> <span class="attr">id</span>=<span class="string">"myVideo"</span> <span class="attr">src</span>=<span class="string">"&#123;&#123;mdc_video&#125;&#125;"</span> <span class="attr">controls</span> <span class="attr">hidden</span>=<span class="string">"&#123;&#123;isShow&#125;&#125;"</span> <span class="attr">objectFit</span>=<span class="string">"contain"</span> <span class="attr">bindfullscreenchange</span>=<span class="string">"fullscreenChange"</span> <span class="attr">bindended</span>=<span class="string">"videoEnd"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;background&#125;&#125;"</span> <span class="attr">wx:key</span>=<span class="string">"*this"</span> <span class="attr">wx:for-index</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">class</span>=<span class="string">"swiper-item"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">mode</span>=<span class="string">"aspectFit"</span> <span class="attr">src</span>=<span class="string">'&#123;&#123;item&#125;&#125;'</span> <span class="attr">class</span>=<span class="string">'swiper-item-img'</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--  实现点击选中样式  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"dots"</span> <span class="attr">hidden</span>=<span class="string">"&#123;&#123;swiperCurrent == 0&#125;&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123;background&#125;&#125;"</span> <span class="attr">wx:for-index</span>=<span class="string">"index"</span> <span class="attr">wx:key</span>=<span class="string">"*this"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">"&#123;&#123;index+1 == swiperCurrent&#125;&#125;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;index + 1&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span>/</span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;background.length&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"media-tab"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:if</span>=<span class="string">"&#123;&#123;swiperCurrent == 0&#125;&#125;"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"media-item meidaActive"</span> <span class="attr">data-current</span>=<span class="string">"0"</span> <span class="attr">bindtap</span>=<span class="string">"tabNav"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'arrow arrow-white'</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'media-name'</span>&gt;</span>视频<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"media-item"</span> <span class="attr">data-current</span>=<span class="string">"1"</span> <span class="attr">bindtap</span>=<span class="string">"tabNav"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'media-name'</span>&gt;</span>图片<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"media-item"</span> <span class="attr">data-current</span>=<span class="string">"0"</span> <span class="attr">bindtap</span>=<span class="string">"tabNav"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'arrow arrow-black'</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'media-name'</span>&gt;</span>视频<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"media-item meidaActive"</span> <span class="attr">data-current</span>=<span class="string">"1"</span> <span class="attr">bindtap</span>=<span class="string">"tabNav"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">'media-name'</span>&gt;</span>图片<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--wxss--&gt;</span></span><br><span class="line">.media-container&#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 750rpx;</span><br><span class="line">  background-color: #000;</span><br><span class="line">&#125;</span><br><span class="line">.swiper,.swiper-item,video,image&#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line">.dots &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  right: 20rpx;</span><br><span class="line">  bottom: 20rpx;</span><br><span class="line">  line-height: 50rpx;</span><br><span class="line">  padding: 0 20rpx;</span><br><span class="line">  background-color: rgba(0, 0, 0, 0.2);</span><br><span class="line">  border-radius: 25rpx;</span><br><span class="line">  color: #fff;</span><br><span class="line">&#125;</span><br><span class="line">#myVideo&#123;</span><br><span class="line">  position: relative;</span><br><span class="line">&#125;</span><br><span class="line">.ceng &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.temp-poster &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.mdc_return &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left: calc(50% - 80rpx);</span><br><span class="line">  bottom: 160rpx; </span><br><span class="line">  color: #333;</span><br><span class="line">  padding: 10rpx;</span><br><span class="line">  width: 160rpx;</span><br><span class="line">  text-align: center;</span><br><span class="line">  line-height: 40rpx;</span><br><span class="line">  border-radius:30rpx;</span><br><span class="line">  background:rgba(255,255,255,0.6);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> .temp-play &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left: 0;</span><br><span class="line">  top: 0;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125; </span><br><span class="line">.temp-img &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">  top: 0;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  margin: auto; </span><br><span class="line">  width: 131rpx;</span><br><span class="line">  height: 131rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.media-tab &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  bottom: 60rpx;</span><br><span class="line">  left: 0;</span><br><span class="line">  width: 100%;</span><br><span class="line">  text-align: center;</span><br><span class="line">  z-index: 99999;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.media-item &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  border-radius: 32rpx;</span><br><span class="line">  padding: 0 30rpx;</span><br><span class="line">  font-size: 28rpx;</span><br><span class="line">  color: #323232;</span><br><span class="line">  background: rgba(255, 255, 255, 0.8);</span><br><span class="line">  margin: 30rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.arrow &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left: 16rpx;</span><br><span class="line">  top: 0;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  margin: auto;</span><br><span class="line">  width: 0;</span><br><span class="line">  height: 0;</span><br><span class="line">  border: 8rpx solid transparent;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.arrow-white &#123;</span><br><span class="line">  border-left: 10rpx solid #fff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.arrow-black &#123;</span><br><span class="line">  border-left: 10rpx solid #323232;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.media-name &#123;</span><br><span class="line">  line-height: 46rpx;</span><br><span class="line">  margin: 8rpx 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.media-item.meidaActive &#123;</span><br><span class="line">  color: #fff;</span><br><span class="line">  background-color: #ff7800;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--js--&gt;</span></span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    //swiper参数</span><br><span class="line">    indicatorDots: false,</span><br><span class="line">    duration: 500,</span><br><span class="line">    //视频地址</span><br><span class="line">    mdc_video: 'https://cloud.video.taobao.com/play/u/576446681/p/1/e/6/t/1/50140370746.mp4',</span><br><span class="line">    //替换视频的封面图</span><br><span class="line">    mdc_videofenmian: 'https://ss0.baidu.com/7Po3dSag_xI4khGko9WTAnF6hhy/image/h%3D300/sign=826baac9dcc8a786a12a4c0e5709c9c7/5bafa40f4bfbfbed0c103c4c75f0f736afc31fb3.jpg',</span><br><span class="line">    // 视频的封面图显示消失的参数</span><br><span class="line">    xiaoshi: false,</span><br><span class="line">    //当前所在滑块的index</span><br><span class="line">    currentTab: '',</span><br><span class="line">    //判断视频是否全屏播放的参数</span><br><span class="line">    isFullScreen: true,</span><br><span class="line">    //视频是否隐藏的参数</span><br><span class="line">    isShow: true,</span><br><span class="line">    //图片数组</span><br><span class="line">    background: ['../img/store-bg.png', '../img/advertisement.png', '../img/leaseholder-img.png'],</span><br><span class="line">    //tab切换</span><br><span class="line">    swiperCurrent: 0,</span><br><span class="line">  &#125;,</span><br><span class="line">  //点击“视频、图片”切换</span><br><span class="line">  tabNav(e) &#123;</span><br><span class="line">    var that = this;</span><br><span class="line">    that.setData(&#123;</span><br><span class="line">      currentTab: e.currentTarget.dataset.current,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 图片轮播触发</span><br><span class="line">  swiperChange: function (e) &#123;</span><br><span class="line">	this.videoCtx.pause();		//新增</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      swiperCurrent: e.detail.current, //获取当前轮播图片的下标,</span><br><span class="line">      currentTab: e.detail.current,</span><br><span class="line">	  isShow: true,				//新增</span><br><span class="line">      xiaoshi: false			//新增</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 监听全屏事件</span><br><span class="line">  fullscreenChange(e) &#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      isFullScreen: !this.data.isFullScreen,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  // 监听视频播放结束事件</span><br><span class="line">  videoEnd(e) &#123;</span><br><span class="line">    var that = this;</span><br><span class="line">    that.setData(&#123;</span><br><span class="line">      xiaoshi: false,</span><br><span class="line">      isShow: true</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  onReady() &#123;</span><br><span class="line">    this.videoCtx = wx.createVideoContext('myVideo')</span><br><span class="line">  &#125;,</span><br><span class="line">  // 视频播放</span><br><span class="line">  // 封面点击的时候相应的操作  获取视频在JS里的参数属性 </span><br><span class="line">  //重点：点击图片接下来视频进行播放，但是视频播放后直接触发了视频的pause() 结局的方案是，延时150ms后再进行视频的播放，就完美解决了</span><br><span class="line">  play() &#123;</span><br><span class="line">    var that = this;</span><br><span class="line">    that.videoCtx.pause();</span><br><span class="line">    setTimeout(function () &#123;</span><br><span class="line">      that.videoCtx.play()</span><br><span class="line">    &#125;, 150);</span><br><span class="line">    that.setData(&#123;</span><br><span class="line">      xiaoshi: true,</span><br><span class="line">      isShow: false</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  // 点击退出视频触发</span><br><span class="line">  returnquanping: function (e) &#123;</span><br><span class="line">    var that = this;</span><br><span class="line">    that.setData(&#123;</span><br><span class="line">      xiaoshi: false,</span><br><span class="line">      isShow: true</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>





<p>参考链接：</p>
<p><a href="http://blog.chinaunix.net/uid-30029642-id-5787093.html" target="_blank" rel="noopener">http://blog.chinaunix.net/uid-30029642-id-5787093.html</a></p>
<p><a href="https://blog.csdn.net/xieshunhai/article/details/72830938" target="_blank" rel="noopener">https://blog.csdn.net/xieshunhai/article/details/72830938</a></p>
<p><a href="https://blog.csdn.net/sophie_u/article/details/71745125" target="_blank" rel="noopener">https://blog.csdn.net/sophie_u/article/details/71745125</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/10/26/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E5%AE%9E%E7%8E%B0%E8%A7%86%E9%A2%91%E5%92%8C%E5%9B%BE%E7%89%87%E8%BD%AE%E6%92%AD/" data-id="ckclpfcw60025mswf08uocoek" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">小程序</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/11/05/css%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0stick-footer/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          css简单实现stick footer
        
      </div>
    </a>
  
  
    <a href="/2018/10/22/JavaScript%E4%B8%AD%E7%9A%84%E5%8E%9F%E5%9E%8B/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">JavaScript中的原型</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Adobe-photoshop-CC-2017/" rel="tag">Adobe photoshop CC 2017</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS3/" rel="tag">CSS3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Clipboard-js/" rel="tag">Clipboard.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML-CSS-JS/" rel="tag">HTML+CSS+JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML-CSS-Jquery/" rel="tag">HTML+CSS+Jquery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/" rel="tag">JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS-jQuery/" rel="tag">JS+jQuery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MYSQL/" rel="tag">MYSQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Typora/" rel="tag">Typora</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue-js/" rel="tag">Vue.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ajax/" rel="tag">ajax</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bootstrap/" rel="tag">bootstrap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cropper-js/" rel="tag">cropper.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css3/" rel="tag">css3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/h5/" rel="tag">h5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jQuery/" rel="tag">jQuery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/koa/" rel="tag">koa</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/video/" rel="tag">video</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/viewport/" rel="tag">viewport</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" rel="tag">浏览器</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Adobe-photoshop-CC-2017/" style="font-size: 10px;">Adobe photoshop CC 2017</a> <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/CSS3/" style="font-size: 10px;">CSS3</a> <a href="/tags/Clipboard-js/" style="font-size: 10px;">Clipboard.js</a> <a href="/tags/HTML-CSS-JS/" style="font-size: 18.33px;">HTML+CSS+JS</a> <a href="/tags/HTML-CSS-Jquery/" style="font-size: 20px;">HTML+CSS+Jquery</a> <a href="/tags/JS/" style="font-size: 20px;">JS</a> <a href="/tags/JS-jQuery/" style="font-size: 13.33px;">JS+jQuery</a> <a href="/tags/MYSQL/" style="font-size: 10px;">MYSQL</a> <a href="/tags/Typora/" style="font-size: 10px;">Typora</a> <a href="/tags/Vue-js/" style="font-size: 13.33px;">Vue.js</a> <a href="/tags/ajax/" style="font-size: 10px;">ajax</a> <a href="/tags/bootstrap/" style="font-size: 11.67px;">bootstrap</a> <a href="/tags/cropper-js/" style="font-size: 10px;">cropper.js</a> <a href="/tags/css/" style="font-size: 18.33px;">css</a> <a href="/tags/css3/" style="font-size: 10px;">css3</a> <a href="/tags/h5/" style="font-size: 15px;">h5</a> <a href="/tags/jQuery/" style="font-size: 10px;">jQuery</a> <a href="/tags/koa/" style="font-size: 10px;">koa</a> <a href="/tags/video/" style="font-size: 10px;">video</a> <a href="/tags/viewport/" style="font-size: 10px;">viewport</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 16.67px;">小程序</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 10px;">工具</a> <a href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" style="font-size: 10px;">浏览器</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/07/14/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2019/04/11/%E8%A7%86%E5%B7%AE%E6%BB%9A%E5%8A%A8/">视差滚动</a>
          </li>
        
          <li>
            <a href="/2019/04/09/cookie%E5%88%A4%E6%96%AD%E7%94%A8%E6%88%B7%E6%98%AF%E5%90%A6%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%99%BB%E9%99%86/">cookie判断用户是否第一次登陆</a>
          </li>
        
          <li>
            <a href="/2019/02/28/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E7%AD%BE%E5%88%B0%E6%A1%88%E4%BE%8B/">微信小程序-签到案例</a>
          </li>
        
          <li>
            <a href="/2019/02/19/%E8%A7%A3%E5%86%B3position-fixed%E5%9C%A8ios%E7%B3%BB%E7%BB%9F%E5%A4%B1%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98/">解决position:fixed在ios系统失效的问题</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>